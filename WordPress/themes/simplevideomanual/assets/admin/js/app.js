(function(e){function t(t){for(var r,o,a=t[0],u=t[1],c=t[2],l=0,p=[];l<a.length;l++)o=a[l],n[o]&&p.push(n[o][0]),n[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);d&&d(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],r=!0,a=1;a<i.length;a++){var u=i[a];0!==n[u]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=i[0]))}return e}var r={},n={app:0},s=[];function o(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=r,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(i,r,function(t){return e[t]}.bind(null,r));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var d=u;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("9150")},"029a":function(e,t,i){"use strict";var r=i("0c3b"),n=i.n(r);n.a},"0c3b":function(e,t,i){},"1bd1":function(e,t,i){"use strict";i("4917");var r=i("905f"),n="en";t["a"]={created:function(){if(this.$i18n){var e=n;r["a"].locale&&r["a"].locale.match(/ja/)&&(e="ja"),this.$i18n.locale=e}}}},4539:function(e,t,i){},"49d7":function(e,t,i){},"4c9a":function(e,t,i){"use strict";i.r(t);i("f751"),i("cadf"),i("551c"),i("097d");t["default"]=Object.assign({locale:"en",ajax_call_data:{action:"",process_step:"",svm_book_post_id:"",svm_include_media:"",svm_export_nonce:""},admin_ajax_url:""},window.svm_args||{})},5500:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrap process export"},[i("h1",{staticClass:"wp-heading-inline"},[e._v("\n      "+e._s(e.$t("Export Manual Page Files"))+"\n    ")]),i("div",{staticClass:"bar"}),i("p",{staticClass:"message"},[i("span",[e._v("0/3 "+e._s(e.$t("Preparing")))]),i("span",[e._v(e._s(e.progressSuffix))])]),i("p",{staticClass:"link",attrs:{"aria-hidden":"true"}},[e._v("\n      "+e._s(e.$t("If not start to download, Click Download."))+".\n    ")]),i("button",{staticClass:"button button-primary download",attrs:{type:"button","aria-hidden":"true"},on:{click:function(t){return t.preventDefault(),e.clickDownload(t)}}},[e._v("\n      "+e._s(e.$t("Download"))+"\n    ")])])},n=[],s=(i("cadf"),i("551c"),i("097d"),i("905f")),o=i("1bd1"),a={name:"TheExportPage",mixins:[o["a"]],data:function(){return{downloadArchiveUrl:"",progressSuffixCountTimer:void 0,progressSuffixCount:0}},mounted:function(){var e=this;jQuery(".bar").progressbar({value:0}),this.progressSuffixCountTimer=setInterval(function(){e.incrementProgressSuffix()},500),this.$nextTick(function(){e.requestNextProcess({process_step:"1"})})},computed:{progressSuffix:function(){return"...".slice(0,this.progressSuffixCount)}},methods:{incrementProgressSuffix:function(){this.progressSuffixCount=this.progressSuffixCount>=3?0:this.progressSuffixCount+1},clearProgressSuffix:function(){jQuery(".message span").eq(1).attr("aria-hidden",!0),clearInterval(this.this.progressSuffixCountTimer),this.progressSuffixCount=0},clickDownload:function(){window.location.href=this.downloadArchiveUrl},requestNextProcess:function(e){var t=this,i=s["a"].ajax_call_data;for(var r in e)i[r]=e[r];var n=function(e){jQuery(".bar").addClass("bar-error"),jQuery(".message").addClass("message-error").text(e),t.clearProgressSuffix()};jQuery.ajax({url:s["a"].admin_ajax_url,type:"POST",data:i}).then(function(e){var i=e.data;e.success?"1"===i.process_step?(jQuery(".bar").progressbar({value:33}),setTimeout(function(){jQuery(".message span").eq(0).text("1/3 "+t.$t("Building assets")),t.requestNextProcess({process_step:"2"})},1e3)):"2"===i.process_step?(jQuery(".bar").progressbar({value:66}),setTimeout(function(){jQuery(".message span").eq(0).text("2/3 "+t.$t("Compress files")),t.requestNextProcess({process_step:"3"})},1e3)):"3"===i.process_step&&(jQuery(".bar").progressbar({value:100}),setTimeout(function(){jQuery(".message span").eq(0).text("3/3 "+t.$t("Done. Wait for Downloading.")),jQuery(".link").attr("aria-hidden",!1),jQuery(".download").attr("aria-hidden",!1),t.downloadArchiveUrl=i.archive_url,window.location.href=i.archive_url,t.clearProgressSuffix()},1e3)):n(i.message)},function(){n(t.$t("Unable to export files. Retry."))})}}},u=a,c=(i("029a"),i("2877")),d=Object(c["a"])(u,r,n,!1,null,"c104d564",null);d.options.__file="TheExportPage.vue";t["default"]=d.exports},5967:function(e,t,i){},"8e95":function(e,t,i){"use strict";var r=i("5967"),n=i.n(r);n.a},"905f":function(e,t,i){"use strict";i("cadf"),i("551c"),i("097d");var r=i("4c9a");t["a"]=r.default},9150:function(e,t,i){"use strict";i.r(t);i("cadf"),i("551c"),i("097d");var r=i("2b0e"),n=i("a925");r["a"].use(n["a"]);var s={locale:"en",dateTimeFormats:{en:{short:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"}},ja:{short:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric",hour12:!0}}},messages:{ja:{Manual:"マニュアル","Select from media":"動画を選択","Select by URL":"動画をURLで指定","Input description text here":"動画の説明を入力","Add text":"追加",Time:"時間",Text:"説明","Add to manual":"マニュアル選択","Search manual":"入力で絞り込み","Search page":"入力で絞り込み","Export Manual Page Files":"マニュアル出力",Preparing:"準備しています","Building assets":"ファイルを作成しています","Compress files":"ファイルを圧縮しています","Done. Wait for Downloading.":"完了しました。ダウンロードを始めます。","If not start to download, Click Download.":"ダウンロードが始まらない場合は、ダウンロードボタンをクリックしてください。","Unable to export files. Retry.":"出力に失敗しました。もう一度お試しください。",Download:"ダウンロード","Time value is invalid":"無効な時間です","URL is invalid":"URLが無効です","Input description text":"動画の説明を入力してください","Not select":"選択なし","Delete description text. OK?":"この動画の説明を削除します。よろしいですか？",Preview:"プレビュー"}}},o=new n["a"](s),a=i("7bb1");i("4539");r["a"].use(a["a"],{}),r["a"].config.productionTip=!1;var u=".svm-Mbox";if(jQuery(u).length>0){var c=i("bacf").default;new r["a"]({components:{TheMetabox:c},template:"<TheMetabox/>",i18n:o,render:function(e){return e(c)}}).$mount(u)}var d=".svm-Exp";if(jQuery(d).length>0){var l=i("5500").default;new r["a"]({components:{TheExportPage:l},template:"<TheExportPage/>",i18n:o,render:function(e){return e(l)}}).$mount(d)}},bacf:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mbox"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.videoSrc,expression:"!videoSrc"}],staticClass:"videoInput"},[i("button",{staticClass:"button videoInput_FileButton",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.clickUploadVideo(t)}}},[e._v("\n        "+e._s(e.$t("Select from media"))+"\n      ")]),i("div",{staticClass:"videoInput_UrlContent"},[i("button",{staticClass:"button videoInput_UrlButton",attrs:{type:"button",disabled:e.disabledSelectVideoUrl},on:{click:function(t){return t.preventDefault(),e.clickLoadVideo(t)}}},[e._v("\n          "+e._s(e.$t("Select by URL"))+"\n        ")]),i("input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,url:!0},expression:"{ required: true, url: true }"},{name:"model",rawName:"v-model",value:e.videoUrl,expression:"videoUrl"}],staticClass:"videoInput_Url",class:e.inputUrlError?"sw-Flg_Error":"",attrs:{type:"url",name:"svm_input_url"},domProps:{value:e.videoUrl},on:{input:function(t){t.target.composing||(e.videoUrl=t.target.value)}}})]),e.inputUrlError?i("div",{staticClass:"videoInput_Error"},[i("span",{domProps:{textContent:e._s(e.inputUrlErrorMessage)}})]):e._e()]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.videoSrc,expression:"videoSrc"}],ref:"video",staticClass:"videoContent"},[i("div",{staticClass:"videoClose"},[i("button",{staticClass:"media-modal-close videoCloseButton",attrs:{type:"button"},on:{click:e.clickCloseVideo}},[e._m(0)])])]),i("div",{staticClass:"description"},[i("div",{staticClass:"descriptionTextInput"},[i("div",{staticClass:"descriptionTextInputTime"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.inputDescription.hour,expression:"inputDescription.hour"},{name:"validate",rawName:"v-validate",value:{required:!0,min_value:0,max_value:23},expression:"{ required: true, min_value: 0, max_value: 23 }"}],staticClass:"descriptionTextInputHh",class:e.inputTimeError?"sw-Flg_Error":"",attrs:{type:"text",name:"svm_input_hour",placeholder:"0","data-vv-as":"description Hour"},domProps:{value:e.inputDescription.hour},on:{blur:e.blurInputTime,input:function(t){t.target.composing||e.$set(e.inputDescription,"hour",t.target.value)}}}),i("span",[e._v(":")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.inputDescription.minute,expression:"inputDescription.minute"},{name:"validate",rawName:"v-validate",value:{required:!0,min_value:0,max_value:59},expression:"{ required: true, min_value: 0, max_value: 59 }"}],staticClass:"descriptionTextInputMm",class:e.inputTimeError?"sw-Flg_Error":"",attrs:{type:"text",name:"svm_input_minute",placeholder:"0","data-vv-as":"description Minute"},domProps:{value:e.inputDescription.minute},on:{blur:e.blurInputTime,input:function(t){t.target.composing||e.$set(e.inputDescription,"minute",t.target.value)}}}),i("span",[e._v(":")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.inputDescription.second,expression:"inputDescription.second"},{name:"validate",rawName:"v-validate",value:{required:!0,min_value:0,max_value:59},expression:"{ required: true, min_value: 0, max_value: 59 }"}],staticClass:"descriptionTextInputSs",class:e.inputTimeError?"sw-Flg_Error":"",attrs:{type:"text",name:"svm_input_second",placeholder:"0","data-vv-as":"description Second"},domProps:{value:e.inputDescription.second},on:{blur:e.blurInputTime,input:function(t){t.target.composing||e.$set(e.inputDescription,"second",t.target.value)}}})]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.inputDescription.text,expression:"inputDescription.text"},{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"}],class:e.errors.has("svm_input_text")?"sw-Flg_Error":"",attrs:{name:"svm_input_text",rows:"3",placeholder:e.$t("Input description text here"),"data-vv-as":"description Text"},domProps:{value:e.inputDescription.text},on:{input:function(t){t.target.composing||e.$set(e.inputDescription,"text",t.target.value)}}})]),i("div",{staticClass:"descriptionTextInputError"},e._l(e.inputDescriptionErrorMessages,function(t,r){return i("span",{directives:[{name:"show",rawName:"v-show",value:e.inputDescriptionErrorMessages,expression:"inputDescriptionErrorMessages"}],key:r,domProps:{textContent:e._s(t)}})})),i("div",{staticClass:"descriptionTextInputControl",class:!!e.inputDescriptionErrorMessages.length&&"descriptionTextInputControl-error"},[i("button",{staticClass:"button descriptionTextInputAddButton",attrs:{type:"button",disabled:e.disabledAddText},on:{click:e.addDescription}},[e._v("\n          "+e._s(e.$t("Add text"))+"\n        ")])]),i("table",{directives:[{name:"show",rawName:"v-show",value:e.descriptions.length,expression:"descriptions.length"}],staticClass:"descriptionTextTable wp-list-table widefat fixed striped media"},[i("thead",{staticClass:"descriptionTextTableHead"},[i("tr",{staticClass:"descriptionTextTableRow"},[i("th",{staticClass:"manage-column column-time column-primary sortable descriptionTextTable_Time",class:{asc:e.isTimeColumnAsc,desc:!e.isTimeColumnAsc},attrs:{scope:"col"}},[i("a",{attrs:{tabindex:"0"},on:{click:function(t){t.preventDefault(),e.clickColumn("time")}}},[i("span",[e._v(e._s(e.$t("Time")))]),i("span",{staticClass:"sorting-indicator"})])]),i("th",{staticClass:"manage-column column-title sortable descriptionTextTable_Text",class:{asc:e.isTextColumnAsc,desc:!e.isTextColumnAsc},attrs:{scope:"col"}},[i("a",{attrs:{tabindex:"0"},on:{click:function(t){t.preventDefault(),e.clickColumn("text")}}},[i("span",[e._v(e._s(e.$t("Text")))]),i("span",{staticClass:"sorting-indicator"})])])])]),i("tbody",{staticClass:"descriptionTextTableBody",attrs:{id:"the-list"}},e._l(e.descriptions,function(t,r){return i("DescriptionRow",{key:r,tag:"tr",attrs:{no:r,description:t},on:{"delete-text":e.deleteText}})}),1)]),i("div",{staticClass:"descriptionRelation"},[i("div",{staticClass:"descriptionRelationWrapper"},[i("p",{staticClass:"descriptionRelationTitle"},[i("strong",[e._v(e._s(e.$t("Add to manual")))])]),i("div",{staticClass:"descriptionRelationBookPage"},[i("div",{staticClass:"descriptionRelationBook"},[i("div",{staticClass:"descriptionRelationBookInput"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.bookSearch,expression:"bookSearch"}],attrs:{type:"text",name:"svm_book_search",placeholder:e.$t("Search manual")},domProps:{value:e.bookSearch},on:{input:function(t){t.target.composing||(e.bookSearch=t.target.value)}}})]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.bookPostId,expression:"bookPostId"}],attrs:{name:"svm_book_post_id",type:"number",size:"10"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.bookPostId=t.target.multiple?i:i[0]}}},e._l(e.searchedBooks,function(t){return i("option",{key:t.id,domProps:{value:t.id,textContent:e._s(t.title)}})}))]),e._m(1),i("div",{staticClass:"descriptionRelationPage"},[i("div",{staticClass:"descriptionRelationPageInput"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.parentPageSearch,expression:"parentPageSearch"}],attrs:{name:"svm_parent_page_search",type:"text",placeholder:e.$t("Search page")},domProps:{value:e.parentPageSearch},on:{input:function(t){t.target.composing||(e.parentPageSearch=t.target.value)}}})]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.parentPagePostId,expression:"parentPagePostId"}],attrs:{name:"svm_parent_page_post_id",type:"number",size:"10"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.parentPagePostId=t.target.multiple?i:i[0]}}},e._l(e.searchedPages,function(t){return i("option",{key:t.id,domProps:{value:t.id,textContent:e._s(t.title)}})}))])])]),i("div",{staticClass:"descriptionRelationPagePreviewWrapper"},[i("p",{staticClass:"descriptionRelationPagePreviewTitle"},[i("strong",[e._v("\n              "+e._s(e.$t("Preview"))+"\n            ")])]),i("div",{staticClass:"descriptionRelationPagePreview"},[i("div",{staticClass:"descriptionRelationPagePreviewWrapper1"},e._l(e.parentPageDescriptions,function(t,r){return i("dl",{key:t.id+r.toString()},[i("dt",{directives:[{name:"show",rawName:"v-show",value:e.parentPageDescriptionTimeText(t),expression:"parentPageDescriptionTimeText(parentPageDescription)"}],domProps:{textContent:e._s(e.parentPageDescriptionTimeText(t))}}),i("dd",{directives:[{name:"show",rawName:"v-show",value:t.text,expression:"parentPageDescription.text"}],domProps:{textContent:e._s(t.text)}})])}))])])]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.description_json,expression:"description_json"}],attrs:{type:"hidden",name:"svm_description_json"},domProps:{value:e.description_json},on:{input:function(t){t.target.composing||(e.description_json=t.target.value)}}})])])},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"media-modal-icon"},[i("span",{staticClass:"screen-reader-text"},[e._v("動画の選択を解除")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"descriptionRelationSpace"},[i("i",{staticClass:"dashicons dashicons-arrow-right-alt2"})])}],s=(i("55dd"),i("7f7f"),i("f751"),i("6b54"),i("3b2b"),i("456d"),i("a481"),i("ac6a"),i("5df3"),i("cadf"),i("551c"),i("097d"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("tr",{staticClass:"adr-v-description-text-root author-self status-inherit is-expanded inline-edit-row description"},[i("td",{staticClass:"time date column-date column-primary",attrs:{"data-colname":e.$t("Time")},on:{mouseover:function(t){e.mouseOverTime(!0)},mouseleave:function(t){e.mouseOverTime(!1)}}},[i("div",{staticClass:"timeContent"},[i("div",{staticClass:"timeInput"},[i("div",{staticClass:"timeInputLabel",class:{"timeInputLabel-label":!e.activeTimeEdit,"timeInputLabel-edit":e.activeTimeEdit}},[i("span",{domProps:{textContent:e._s(e.hourLabel)}}),i("span",{staticClass:"timeInputMark"},[e._v(":")]),i("span",{domProps:{textContent:e._s(e.minuteLabel)}}),i("span",{staticClass:"timeInputMark"},[e._v(":")]),i("span",{domProps:{textContent:e._s(e.secondLabel)}})]),i("div",{staticClass:"timeInputEdit",class:{"timeInputEdit-label":!e.activeTimeEdit,"timeInputEdit-edit":e.activeTimeEdit}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.description.hour,expression:"description.hour"},{name:"validate",rawName:"v-validate",value:{required:!0,min_value:0,max_value:23},expression:"{ required: true, min_value: 0, max_value: 23 }"}],staticClass:"timeHh",class:{"sw-Flg_Error":e.timeError},attrs:{type:"text",placeholder:"0",tabindex:"0",name:e.inputHour,"data-vv-as":"Description Hour"},domProps:{value:e.description.hour},on:{focus:e.focusTime,blur:e.blurTime,input:function(t){t.target.composing||e.$set(e.description,"hour",t.target.value)}}}),i("span",[e._v(":")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.description.minute,expression:"description.minute"},{name:"validate",rawName:"v-validate",value:{required:!0,min_value:0,max_value:59},expression:"{ required: true, min_value: 0, max_value: 59 }"}],staticClass:"timeMm",class:{"sw-Flg_Error":e.timeError},attrs:{type:"text",placeholder:"0",tabindex:"0",name:e.inputMinute,"data-vv-as":"Description Minute"},domProps:{value:e.description.minute},on:{focus:e.focusTime,blur:e.blurTime,input:function(t){t.target.composing||e.$set(e.description,"minute",t.target.value)}}}),i("span",[e._v(":")]),i("input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,min_value:0,max_value:59},expression:"{ required: true, min_value: 0, max_value: 59 }"},{name:"model",rawName:"v-model",value:e.description.second,expression:"description.second"}],staticClass:"timeSs",class:{"sw-Flg_Error":e.timeError},attrs:{type:"text",placeholder:"0",tabindex:"0",name:e.inputSecond,"data-vv-as":"Description Second"},domProps:{value:e.description.second},on:{focus:e.focusTime,blur:e.blurTime,input:function(t){t.target.composing||e.$set(e.description,"second",t.target.value)}}})])]),i("span",{directives:[{name:"show",rawName:"v-show",value:e.timeError,expression:"timeError"}],staticClass:"timeInputError",domProps:{textContent:e._s(e.timeError)}}),i("div",{staticClass:"row-actions timeAction",class:{"timeAction-edit":e.activeTimeEdit}},[i("span",{staticClass:"delete"},[i("a",{staticClass:"submitdelete aria-button-if-js",attrs:{tabindex:"0",role:"button"},on:{click:function(t){e.deleteText(t)},focus:e.focusDeleteText,blur:e.blurDeleteText}},[e._v("Delete\n            ")])])])])]),i("td",{staticClass:"title column-title has-row-actions text",attrs:{"data-colname":e.$t("Text")},on:{mouseover:function(t){e.mouseOverText(!0)},mouseleave:function(t){e.mouseOverText(!1)}}},[i("div",{staticClass:"filename textContent"},[i("span",{ref:"descriptionTextLabel",staticClass:"textLabel",class:{"textLabel-label":!e.activeTimeEdit,"textLabel-edit":e.activeTimeEdit},domProps:{textContent:e._s(e.descriptionTextLabel)}}),i("textarea",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"},{name:"model",rawName:"v-model",value:e.description.text,expression:"description.text"}],ref:"descriptionText",staticClass:"textInput",class:{"sw-Flg_Error":e.descriptionTextError,"textInput-label":!e.activeTimeEdit,"textInput-edit":e.activeTimeEdit},attrs:{tabindex:"0",name:e.inputDescriptionText,placeholder:e.$t("Input description text here"),"data-vv-as":"Description Text"},domProps:{value:e.description.text},on:{focus:e.focusText,blur:e.blurText,input:function(t){t.target.composing||e.$set(e.description,"text",t.target.value)}}})]),i("span",{directives:[{name:"show",rawName:"v-show",value:e.descriptionTextError,expression:"descriptionTextError"}],staticClass:"textInputError",domProps:{textContent:e._s(e.descriptionTextError)}})])])}),o=[],a=(i("c5f6"),{name:"DescriptionRow",components:{DescriptionRow:l},props:{no:{type:Number},description:{type:Object,default:function(){return{text:"",hour:0,minute:0,second:0}}}},mounted:function(){this.$validator.validate(),this.adjustTextAreaHeight()},data:function(){return{timeEditable:!1,textEditable:!1,rowHour:2,activeTimeEdit:!1,activeTextEdit:!1}},computed:{descriptionTextError:function(){var e=this.$validator.errors.has(this.inputDescriptionText)?this.$t("Input description text"):"";return e},timeError:function(){var e=this;if(!(this.fields[this.inputHour]&&this.fields[this.inputMinute]&&this.fields[this.inputSecond]))return"";var t=[this.inputHour,this.inputMinute,this.inputSecond],i=t.some(function(t){return e.$validator.errors.has(t)}),r=i?this.$t("Time value is invalid"):"";return r},inputHour:function(){return"svm_input_hour_"+this.no},inputMinute:function(){return"svm_input_minute_"+this.no},inputSecond:function(){return"svm_input_second_"+this.no},inputDescriptionText:function(){return"svm_input_text_"+this.no},hourLabel:function(){return this.description.hour?("00"+this.description.hour).slice(-2):""},minuteLabel:function(){return this.description.minute?("00"+this.description.minute).slice(-2):""},secondLabel:function(){return this.description.second?("00"+this.description.second).slice(-2):""},descriptionTextLabel:function(){return this.description.text?this.description.text:this.$t("Input description text here")}},methods:{blurTime:function(e){this.activeTimeEdit=!1,this.activeTextEdit=!1;var t=e.currentTarget.getAttribute("name");this.fields[t].dirty=!0},focusTime:function(){this.activeTimeEdit=!0,this.activeTextEdit=!0},blurDeleteText:function(){this.activeTimeEdit=!1,this.activeTextEdit=!1},focusDeleteText:function(){this.activeTimeEdit=!0,this.activeTextEdit=!0},deleteText:function(){this.$emit("delete-text",{index:this.no})},blurText:function(){this.activeTextEdit=!1,this.activeTimeEdit=!1},focusText:function(){this.activeTextEdit=!0,this.activeTimeEdit=!0},mouseOverTime:function(e){this.activeTimeEdit=e,this.activeTextEdit=e},mouseOverText:function(e){this.activeTextEdit=e,this.activeTimeEdit=e,this.adjustTextAreaHeight()},adjustTextAreaHeight:function(){var e=jQuery(this.$refs.descriptionText).outerHeight();jQuery(this.$refs.descriptionText).css({height:e}),jQuery(this.$refs.descriptionTextLabel).css({height:e-1})}}}),u=a,c=(i("d118"),i("2877")),d=Object(c["a"])(u,s,o,!1,null,"d73c4118",null);d.options.__file="DescriptionRow.vue";var l=d.exports,p=i("905f"),m={alert:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return alert(e)}),error:function(e,t){return alert(e+"\r"+t)},confirm:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return confirm(e)})},v=i("517b"),h=i("1bd1"),f={name:"TheMetabox",mixins:[h["a"]],components:{DescriptionRow:l},data:function(){return{postId:void 0,player:void 0,videoUrl:void 0,inputDescription:{hour:"",minute:"",second:"",text:""},descriptions:[],bookSearch:void 0,parentPageSearch:void 0,bookPostId:0,books:[],searchedBooks:[],parentPagePostId:0,pages:[],searchedPages:[],videoId:0,videoSrc:void 0,videoTimer:void 0,videoEl:void 0,parentPageDescriptions:[],isTimeColumnAsc:!1,isTextColumnAsc:!1,orgSendAttachment:!1,mediaUseByPlugin:!1}},created:function(){this.postId=parseInt(p["a"].page_post_id,10)},mounted:function(){window.send_to_editor||(this.orgSendToEditor=window.send_to_editor);var e=this;jQuery.ajax({url:p["a"].rest_endpoint+"/pages/"+encodeURIComponent(this.postId)+".json",method:"GET"}).then(function(t){if(t&&t.post_meta){e.bookSearch="",e.parentPageSearch="";var i=t.post_meta[p["a"].meta_key.book_post_id]||0,r=e.refreshManualBooks(),n=e.refreshManualPages(i);Promise.all([r,n]).then(function(){var i={};if(t.post_meta[p["a"].meta_key.description_json]){try{i=JSON.parse(t.post_meta[p["a"].meta_key.description_json])}catch(n){return void m.error("unable to get data.","re input fields.")}if(i["input_description"]&&(e.inputDescription=i["input_description"]),i["descriptions"]&&(e.descriptions=i["descriptions"]),e.books&&e.books.some(function(t){return t.id===i["book_post_id"]&&(e.bookPostId=i["book_post_id"],!0)}),e.pages&&e.pages.some(function(t){return t.id===i["parent_page_post_id"]&&(e.parentPagePostId=i["parent_page_post_id"],!0)}),t.post_meta[p["a"].meta_key.video_meta]){var r=t.post_meta[p["a"].meta_key.video_meta];r.url&&r.type&&e.setVideoSrc(r.url,i["video_id"])}}}).catch(function(e){m.error(e,"re input fields.")})}},function(e){m.error(e)})},computed:{description_json:{get:function(){var e=function(e,t,i){if(e){var r=parseInt(e);isNaN(r)||(i[t]=r)}return i},t=function(e){var t={};return e.hour&&"string"===typeof e.hour&&(t.hour=e.hour.replace(/[^0-9]/,"")),e.minute&&"string"===typeof e.minute&&(t.minute=e.minute.replace(/[^0-9]/,"")),e.second&&"string"===typeof e.second&&(t.second=e.second.replace(/[^0-9]/,"")),e.text&&(t.text=e.text),t},i={},r=t(this.inputDescription);if(r&&Object.keys(r).length>0&&(i["inputDescription"]=r),this.descriptions&&this.descriptions.length>0){var n=[];this.descriptions.forEach(function(e){r=t(e),r&&Object.keys(r).length>0&&n.push(r)}),n.length>0&&(i["descriptions"]=n)}return i=e(this.bookPostId,"book_post_id",i),i=e(this.parentPagePostId,"parent_page_post_id",i),i=e(this.videoId,"video_id",i),i.video_src=this.videoSrc?this.videoSrc:"",JSON.stringify(i)}},inputUrlError:function(){return this.inputUrlErrorMessage},inputUrlErrorMessage:function(){if(!this.videoUrl)return"";var e="svm_input_url";return this.fields[e].dirty&&this.fields[e].dirty&&this.$validator.errors.has(e)?this.$t("URL is invalid"):void 0},inputTimeErrorMessage:function(){var e=this;if(!(this.fields["svm_input_hour"]&&this.fields["svm_input_minute"]&&this.fields["svm_input_second"]))return"";var t=["svm_input_hour","svm_input_minute","svm_input_second"],i=t.some(function(t){return!e.fields[t].dirty});if(i)return"";var r=t.some(function(t){return e.fields[t].dirty&&e.$validator.errors.has(t)}),n=r?this.$t("Time value is invalid"):"";return n},inputTimeError:function(){return this.inputTimeErrorMessage},inputDescriptionErrorMessages:function(){var e=[];return this.inputTimeErrorMessage&&e.push(this.inputTimeErrorMessage),this.$validator.errors.has("svm_input_text")&&e.push(this.$t("Input description text")),e},disabledSelectVideoUrl:function(){var e="svm_input_url"in this.fields&&this.fields["svm_input_url"].dirty,t=e&&this.$validator.errors.has("svm_input_url");return!e||t},disabledAddText:function(){var e=this,t=["svm_input_hour","svm_input_minute","svm_input_second","svm_input_text"],i=t.some(function(t){var i=t in e.fields&&e.fields[t].dirty,r=i&&e.$validator.errors.has(t);return!i||r});return i},descriptionsLength:function(){return this.descriptions?this.descriptions.length:0}},watch:{bookPostId:function(e){var t=this;this.refreshManualPages(e).then(function(){t.parentPageSearch=""})},parentPagePostId:function(e){this.refreshParentPagePreview(e)},bookSearch:Object(v["a"])(function(e){var t=[];if(!e)return this.searchedBooks=this.books,e;for(var i=new RegExp(e,"i"),r=0,n=this.books.length;r<n;r++){var s=this.books[r];i.test(s.title)&&t.push(s)}return this.searchedBooks=t,e},500),parentPageSearch:Object(v["a"])(function(e){var t=[];if(!e)return this.searchedPages=this.pages,e;for(var i=new RegExp(e,"i"),r=1,n=this.pages.length;r<n;r++){var s=this.pages[r];i.test(s.title)&&t.push(s)}return this.searchedPages=t,e},500)},methods:{playVideo:function(){var e=this;this.videoTimer&&clearInterval(this.videoTimer),this.videoTimer=setInterval(function(){var t=Math.floor(e.videoEl.currentTime%60).toString(),i=Math.floor(e.videoEl.currentTime/60%60).toString(),r=Math.floor(e.videoEl.currentTime/60/60).toString();e.inputDescription=Object.assign({},e.inputDescription,{hour:r,minute:i,second:t})},200)},pauseVideo:function(){this.videoTimer&&clearInterval(this.videoTimer)},clickUploadVideo:function(){var e=this;if(wp&&wp.media&&wp.media.editor){this.orgSendAttachment||(this.orgSendAttachment=wp.media.editor.send.attachment),jQuery(".add_media").off("click.manual").on("click.manual",function(){e.mediaUseByPlugin=!1}),this.mediaUseByPlugin=!0;var t=this;wp.media.editor.send.attachment=function(e,i){if(!t.mediaUseByPlugin)return t.orgSendAttachment.apply(this,[e,i]);t.setVideoSrc(i.url,i.id)},wp.media.editor.open(void 0,{multiple:!1})}else m.error("Not loaded wordpress Media Uploader","")},clickLoadVideo:function(){this.videoUrl&&this.setVideoSrc(this.videoUrl)},clickCloseVideo:function(){this.clearVideoSrc()},blurInputTime:function(e){var t=e.currentTarget.getAttribute("name");t&&(this.fields[t].dirty=!0)},addDescription:function(){var e=JSON.parse(JSON.stringify(this.inputDescription));this.descriptions.unshift(e)},clearVideoSrc:function(){jQuery("video",this.$refs.video).remove(),this.videoEl=void 0,this.videoId=void 0,this.videoSrc=void 0},setVideoSrc:function(e,t){this.clearVideoSrc();var i=jQuery('<video style="width:100%" controls>').attr({src:e,style:"width: 100%"}).on("play",this.playVideo).on("pause",this.pauseVideo);jQuery(this.$refs.video).append(i),this.videoEl=i.get(0),this.videoId=t||"",this.videoSrc=e,this.inputDescription.hour="0",this.inputDescription.minute="0",this.inputDescription.second="0",this.$validator.flag("svm_input_hour",{dirty:!0}),this.$validator.flag("svm_input_minute",{dirty:!0}),this.$validator.flag("svm_input_second",{dirty:!0})},deleteText:function(e){m.confirm(this.$t("Delete description text. OK?"))&&this.$delete(this.descriptions,e.index)},clickColumn:function(e){if("time"===e){if(this.isTimeColumnAsc=!this.isTimeColumnAsc,0===this.descriptions.length)return;var t=this.isTimeColumnAsc?1:-1,i=this.isTimeColumnAsc?-1:1,r=["hour","minute","second"];this.descriptions.sort(function(e,n){var s=0;return r.some(function(r){var o=("00"+e[r]).slice(-2),a=("00"+n[r]).slice(-2);return o<a?(s=i,!0):o>a?(s=t,!0):void 0}),s})}else if("text"===e){this.isTextColumnAsc=!this.isTextColumnAsc;var n=this.isTextColumnAsc?1:-1,s=this.isTextColumnAsc?-1:1;this.descriptions.sort(function(e,t){var i=0;return e.text<t.text?i=s:e.text>t.text&&(i=n),i})}},refreshManualBooks:function(){var e=this;return new Promise(function(t){var i=p["a"].ajax_call_data;i["status"]="any",jQuery.ajax({url:p["a"].rest_endpoint+"/manuals.json",method:"POST",data:i}).then(function(i){if(i){var r=[];i.forEach(function(e){r.push({id:e.ID,title:e.post_title})}),e.searchedBooks=r,e.books=r}t(i)},function(e){t({reason:e})})})},refreshManualPages:function(e){var t=this;return new Promise(function(i){if(!e||0===e){var r=[{id:0,title:t.$t("Not select")}];return t.searchedPages=r,t.pages=r,void i({})}var n=p["a"].ajax_call_data;n["status"]="any",jQuery.ajax({url:p["a"].rest_endpoint+"/manuals/"+encodeURIComponent(e)+"/pages.json",method:"POST",data:n}).then(function(e){if(e){var r=[];e.forEach(function(e){t.postId!==e.ID&&r.push({id:e.ID,title:e.post_title})}),r.unshift({id:0,title:t.$t("Not select")}),t.searchedPages=r,t.pages=r}i(e)},function(e){i({reason:e})})})},refreshParentPagePreview:function(e){var t=this;return new Promise(function(i){if(!e||0===e)return t.parentPageDescriptions=[],void i({});jQuery.ajax({url:p["a"].rest_endpoint+"/pages/"+encodeURIComponent(e)+".json",method:"GET"}).then(function(e){if(e&&e.post_meta&&e.post_meta[p["a"].meta_key.description_json]){var i=e.post_meta[p["a"].meta_key.description_json];try{var r=JSON.parse(i);r&&r.descriptions?t.parentPageDescriptions=r.descriptions:t.parentPageDescriptions=[]}catch(n){m.error("unable to get page preiew.","click page name again"),t.parentPageDescriptions=[]}}else t.parentPageDescriptions=[]},function(e){m.error(e)})})},parentPageDescriptionTimeText:function(e){if(!e.hour||!e.minute||!e.second)return"";var t=("00"+e.hour).slice(-2),i=("00"+e.minute).slice(-2),r=("00"+e.second).slice(-2),n=t+":"+i+":"+r+" ";return n}}},_=f,x=(i("8e95"),Object(c["a"])(_,r,n,!1,null,"12cade0c",null));x.options.__file="TheMetabox.vue";t["default"]=x.exports},d118:function(e,t,i){"use strict";var r=i("49d7"),n=i.n(r);n.a}});